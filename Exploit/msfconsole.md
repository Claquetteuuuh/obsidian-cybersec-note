# Start db
```bash
$> service postgresql start
Starting PostgreSQL 16 database server: main.
```

Verify connection
```bash
msf6 > db_status
[*] Connected to msf. Connection type: postgresql.
```
# Start console
```bash
$> msfconsole
msf6 >
```
# Creating Workspace
```bash
msf6 > workspace -a win2k12
[*] Added workspace: win2k12
[*] Workspace: win2k12
```
# Import Scan
You can import the result of a nmap scan in xml format

```
msf6 > db_import /root/windows_machine.xml
[*] Importing 'Nmap XML' data
[*] Import: Parsing with 'Nokogiri v1.13.10'
[*] Importing host 10.2.29.43
[*] Successfully imported /root/windows_machine.xml
msf6 >
```

## Check live hosts
We can verify if it imports successfully by typing `hosts`:

```bash
msf6 > hosts
Hosts
=====
address     mac  name            os_name       os_flavor  os_sp  purpose  info  comments
-------     ---  ----            -------       ---------  -----  -------  ----  --------
10.2.29.43       demo.ine.local  Windows 2012                    server
```
## Check services (ports)
We can check all services by typing `services`:
```bash
msf6 > services
Services
========
host        port   proto  name               state  info
----        ----   -----  ----               -----  ----
10.2.29.43  80     tcp    http               open   HttpFileServer httpd 2.3
10.2.29.43  135    tcp    msrpc              open   Microsoft Windows RPC
10.2.29.43  139    tcp    netbios-ssn        open   Microsoft Windows netbios-ssn
10.2.29.43  445    tcp    microsoft-ds       open   Microsoft Windows Server 2008 R2 - 2012 microsoft-ds
10.2.29.43  3389   tcp    ssl/ms-wbt-server  open
10.2.29.43  49154  tcp    msrpc              open   Microsoft Windows RPC
10.2.29.43  49155  tcp    msrpc              open   Microsoft Windows RPC

msf6 > 
```
## Check vulns
We can check all vulnerabilities found by typing `vulns`:
```bash
msf6 > vulns

Vulnerabilities
===============
Timestamp  Host  Name  References
---------  ----  ----  ----------
msf6 > 
```
# Execute nmap 
You can execute nmap directly in msfconsole
This import automatically the data from the scan
```bash
msf6 > db_nmap -Pn -sS -sV -O <IP> 
```
# Auxiliary modules
## Search
The search command permit to search through the msfconsole modules:
```bash
msf6 > search portscan
Matching Modules
================
   #  Name                                              Disclosure Date  Rank    Check  Description
   -  ----                                              ---------------  ----    -----  -----------
   0  auxiliary/scanner/portscan/ftpbounce              .                normal  No     FTP Bounce Port Scanner
   1  auxiliary/scanner/natpmp/natpmp_portscan          .                normal  No     NAT-PMP External Port Scanner
   2  auxiliary/scanner/sap/sap_router_portscanner      .                normal  No     SAPRouter Port Scanner
   3  auxiliary/scanner/portscan/xmas                   .                normal  No     TCP "XMas" Port Scanner
   4  auxiliary/scanner/portscan/ack                    .                normal  No     TCP ACK Firewall Scanner
   5  auxiliary/scanner/portscan/tcp                    .                normal  No     TCP Port Scanner
   6  auxiliary/scanner/portscan/syn                    .                normal  No     TCP SYN Port Scanner
   7  auxiliary/scanner/http/wordpress_pingback_access  .                normal  No     Wordpress Pingback Locator

Interact with a module by name or index. For example info 7, use 7 or use auxiliary/scanner/http/wordpress_pingback_access
```
You can specify the `type:auxiliary` for auxiliary module
You can specify the `name:<name>` for the name of service
You can specify the `cve:<date>` for specify a date
## Select a module
You can use a module by using the `use` command
```bash
msf6 > use auxiliary/scanner/portscan/tcp
msf6 auxiliary(scanner/portscan/tcp) > 
```
## Setting global variable
```bash
msg6 > setg RHOSTS <IP>
```
# Get informations
## Hosts
```bash
msf6 > hosts
Hosts
=====

address        mac  name  os_name  os_flavor  os_sp  purpose  info  comments
-------        ---  ----  -------  ---------  -----  -------  ----  --------
192.183.144.3             Unknown                    device
```
## Services
```bash
msf6 > services
Services
========

host           port  proto  name   state  info
----           ----  -----  ----   -----  ----
192.183.144.3  3306  tcp    mysql  open   5.5.61-0ubuntu0.14.04.1
```
## Loot
```bash
msf6 auxiliary(scanner/mysql/mysql_schemadump) > loot
Loot
====

host           service  type          name                            content     info          path
----           -------  ----          ----                            -------     ----          ----
192.183.144.3  mysql    mysql_schema  192.183.144.3_mysql_schema.txt  text/plain  MySQL Schema  /root/.msf4/loot/20241018130313_mysql_192.183.144.3_mysql_schema_830066.txt
```
## Creds
```bash
msf6 > creds
Credentials
===========

host           origin         service           public            private                                    realm  private_type        JtR Format        cracked_password
----           ------         -------           ------            -------                                    -----  ------------        ----------        ----------------
192.183.144.3  192.183.144.3  3306/tcp (mysql)  root              twinkle                                           Password
192.183.144.3  192.183.144.3  3306/tcp (mysql)  root              *A0E23B565BACCE3E70D223915ABF2554B2540144         Nonreplayable hash  mysql,mysql-sha1
...
192.183.144.3  192.183.144.3  3306/tcp (mysql)  sysadmin          *78A1258090DAA81738418E11B73EB494596DFDD3         Nonreplayable hash  mysql,mysql-sha1
```
## Vulns
```bash
msf6 > vulns -p <PORT>
```